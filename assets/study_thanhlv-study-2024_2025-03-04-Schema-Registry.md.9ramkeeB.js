import{_ as e,j as a,o as i,v as t}from"./chunks/framework.9xwLhOZU.js";const r=JSON.parse('{"title":"Schema Registry là gì ?","description":"","frontmatter":{"footer":true,"title":"Schema Registry là gì ?","authors":["lethanh"],"date":"2025-03-04T00:00:00.000Z","outline":"deep","draft":true,"group":"2.1 Kafka"},"headers":[{"level":2,"title":"Vấn đề khi serialize dữ liệu thành byte array.","slug":"van-đe-khi-serialize-du-lieu-thanh-byte-array","link":"#van-đe-khi-serialize-du-lieu-thanh-byte-array","children":[]},{"level":2,"title":"Schema Registry là gì?","slug":"schema-registry-la-gi","link":"#schema-registry-la-gi","children":[{"level":3,"title":"Cách Schema Registry hoạt động","slug":"cach-schema-registry-hoat-đong","link":"#cach-schema-registry-hoat-đong","children":[]}]}],"relativePath":"study/thanhlv-study-2024/2025-03-04-Schema-Registry.md","filePath":"study/thanhlv-study-2024/2025-03-04-Schema-Registry.md","lastUpdated":1742434415000}'),h={name:"study/thanhlv-study-2024/2025-03-04-Schema-Registry.md"},n=[t('<nav class="table-of-contents"><ul><li><a href="#van-đe-khi-serialize-du-lieu-thanh-byte-array">Vấn đề khi serialize dữ liệu thành byte array.</a></li><li><a href="#schema-registry-la-gi">Schema Registry là gì?</a><ul><li><a href="#cach-schema-registry-hoat-đong">Cách Schema Registry hoạt động</a></li></ul></li></ul></nav><h2 id="van-đe-khi-serialize-du-lieu-thanh-byte-array" tabindex="-1">Vấn đề khi serialize dữ liệu thành byte array. <a class="header-anchor" href="#van-đe-khi-serialize-du-lieu-thanh-byte-array" aria-label="Permalink to &quot;Vấn đề khi serialize dữ liệu thành byte array.&quot;">​</a></h2><p>Vì producer gửi tin nhắn qua network nên dữ liệu cần được serialize thành byte array trước khi gửi đi. Kafka Broker không thay đổi dữ liệu, nó chỉ lưu trữ nó lưu trữ chúng dưới dạng byte array.</p><p>Điều này cũng tương tự khi Broker response dữ liệu cho consumer, kafka broker lất các byte array từ disk và trả về cho consumer( Dữ liệu đã được serialized ).</p><p>Bởi vì chỉ làm việc với byte array nên Kafka không biết dữ liệu đó là gì, nó không biết dữ liệu đó là một chuỗi, một số nguyên, một object, ... Điều này rất tốt bởi vì nó giúp bất kỳ ứng dụng(Bất kỳ ngôn ngữ, chỉ cần triển khai giao thức giao tiếp với kafka) nào cũng có thể gửi và đọc dữ liệu Kafka.</p><p>Byte rất linh hoạt, nhưng nó cũng có nhược điểm, các nhà phát triển thường làm việc ở mức độ trừu tượng hóa cao hơn, họ muốn gửi dữ liệu dưới dạng object, struct, ... chứ không phải là byte array.</p><p>Vì vậy chuyển đổi dữ liệu từ object sang byte array là một bước được xảy ra ở đâu đó trong luồng hoạt động. (serialize ở producer và deserialize ở consumer).</p><p><img src="/assets/The-conversion-of-objects-to-bytes-and-bytes-to-objects-happens-at-the-client-level.dlAkYkz7.png" alt="kafka-architecture-view.png"></p><p><img src="/assets/The-serializer-and-deserializer-are-agnostic-of-the-producer-and-consumer-and-perform-the-expected-action-when-the-serialize-and-deserialize-methods-are-called.D3mE_shV.png" alt="kafka-architecture-view.png"></p><h2 id="schema-registry-la-gi" tabindex="-1">Schema Registry là gì? <a class="header-anchor" href="#schema-registry-la-gi" aria-label="Permalink to &quot;Schema Registry là gì?&quot;">​</a></h2><p>Bởi vì cần serialize và deserialize dữ liệu nên cần một cơ chế để đảm bảo rằng producer và consumer đều serialize và deserialize dữ liệu theo cùng một cách.</p><p>Schema Registry là một component lưu trữ và quản lý schema và kiểm soát các schema của dữ liệu được gửi qua Kafka. Nó giúp đảm bảo tính tương thích giữa các phiên bản schema khác nhau khi dữ liệu được serialize và deserialize.</p><p>Schema Registry hỗ trợ serialization frameworks như AvRo, Protobuf, JSON, ...</p><h3 id="cach-schema-registry-hoat-đong" tabindex="-1">Cách Schema Registry hoạt động <a class="header-anchor" href="#cach-schema-registry-hoat-đong" aria-label="Permalink to &quot;Cách Schema Registry hoạt động&quot;">​</a></h3><p>Chúng ta sẽ nhanh chóng tìm hiểu cách hoạt động của Schema Registry thông qua ví dụ minh hoạ sau: <img src="/assets/Cach-Schema-Registry-hoat-dong.yiedmOpo.png" alt="kafka-architecture-view.png"></p><ol><li>Khi producer thực hiện serialize dữ liệu, nó sẽ truy suất schema từ Schema Registry(Thông quá HTTP) và lưu nó vào cache</li><li>Producer thực hiện serialize dữ liệu Record bằng schema</li><li>Producer gửi dữ liệu đã được serialize lên Kafka Broker (Byte)</li><li>Consumer nhận dữ liệu từ Kafka Broker</li><li>Consumer nhận thấy mình chưa có thông tin của schema, nó sẽ truy suất schema từ Schema Registry và lưu lại ở local của mình</li><li>Sau khi nhận được schema, Consumer thực hiện deserialize dữ liệu bằng schema</li><li>Dữ liệu schema thực tế sẽ lưu trữ trên Kafka Broker. Schema Registry chỉ là tầng quản lý và cache schema.</li></ol><h1 id="ref" tabindex="-1">REF: <a class="header-anchor" href="#ref" aria-label="Permalink to &quot;REF:&quot;">​</a></h1><ul><li><a href="https://ibm-cloud-architecture.github.io/refarch-eda/technology/kafka-overview/" target="_blank" rel="noreferrer">https://ibm-cloud-architecture.github.io/refarch-eda/technology/kafka-overview/</a></li><li><strong>Kafka book</strong>: <a href="/study/thanhlv-study-2024/static/Kafka%20Event%20Streaming%20Platform%20In%20Action.pdf">Kafka Event Streaming Platform In Action.pdf</a></li></ul>',18)];const c=e(h,[["render",function(e,t,r,h,c,l){return i(),a("div",null,n)}]]);export{r as __pageData,c as default};
