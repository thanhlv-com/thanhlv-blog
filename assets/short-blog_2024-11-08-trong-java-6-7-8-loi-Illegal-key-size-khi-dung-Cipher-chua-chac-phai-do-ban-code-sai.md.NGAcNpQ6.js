import{_ as a,j as i,o as h,v as n}from"./chunks/framework.OuVixYWh.js";const t=JSON.parse('{"title":"Trong java 6 7 8 lỗi Illegal key size khi dùng Cipher chưa chắc phải do bạn code sai mà là do Java Policy JCE.","description":"Khi bạn sử dụng Cipher để mã hóa dữ liệu trong Java, bạn có thể gặp phải lỗi `Illegal key size`. Lỗi này thường xảy ra khi bạn sử dụng một key size lớn hơn 128 bits. Trong bài viết này, chúng ta sẽ tìm hiểu về lỗi này và cách khắc phục nó.","frontmatter":{"footer":true,"title":"Trong java 6 7 8 lỗi Illegal key size khi dùng Cipher chưa chắc phải do bạn code sai mà là do Java Policy JCE.","description":"Khi bạn sử dụng Cipher để mã hóa dữ liệu trong Java, bạn có thể gặp phải lỗi `Illegal key size`. Lỗi này thường xảy ra khi bạn sử dụng một key size lớn hơn 128 bits. Trong bài viết này, chúng ta sẽ tìm hiểu về lỗi này và cách khắc phục nó.","authors":["lethanh"],"date":"2024-11-08T00:00:00.000Z","outline":"deep","image":"https://static-cdn.thanhlv.com/short-blog/images/2024-11-08-trong-java-6-7-8-loi-Illegal-key-size-khi-dung-Cipher-chua-chac-phai-do-ban-code-sai/image.jpg","draft":false},"headers":[{"level":2,"title":"Lỗi Illegal key size","slug":"loi-illegal-key-size","link":"#loi-illegal-key-size","children":[]},{"level":2,"title":"Bảng dưới đấy cho thấy các phiên bản mặc định hỗ trợ key size lớn hơn 128 bits và link download chính sách JCE cho phiên bản thấp hơn.","slug":"bang-duoi-đay-cho-thay-cac-phien-ban-mac-đinh-ho-tro-key-size-lon-hon-128-bits-va-link-download-chinh-sach-jce-cho-phien-ban-thap-hon","link":"#bang-duoi-đay-cho-thay-cac-phien-ban-mac-đinh-ho-tro-key-size-lon-hon-128-bits-va-link-download-chinh-sach-jce-cho-phien-ban-thap-hon","children":[]},{"level":2,"title":"Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files là gì ?","slug":"java-cryptography-extension-jce-unlimited-strength-jurisdiction-policy-files-la-gi","link":"#java-cryptography-extension-jce-unlimited-strength-jurisdiction-policy-files-la-gi","children":[]},{"level":2,"title":"Chính sách hạn chế xuất khẩu mật mã từ Hoa Kỳ là gì ?","slug":"chinh-sach-han-che-xuat-khau-mat-ma-tu-hoa-ky-la-gi","link":"#chinh-sach-han-che-xuat-khau-mat-ma-tu-hoa-ky-la-gi","children":[]},{"level":2,"title":"Tôi vẫn muốn sử dụng java 6 7 8 ở phiên bản chưa hỗ trợ, làm thế nào để khắc phục lỗi Illegal key size ?","slug":"toi-van-muon-su-dung-java-6-7-8-o-phien-ban-chua-ho-tro-lam-the-nao-đe-khac-phuc-loi-illegal-key-size","link":"#toi-van-muon-su-dung-java-6-7-8-o-phien-ban-chua-ho-tro-lam-the-nao-đe-khac-phuc-loi-illegal-key-size","children":[]},{"level":2,"title":"Tóm tắt","slug":"tom-tat","link":"#tom-tat","children":[]}],"relativePath":"short-blog/2024-11-08-trong-java-6-7-8-loi-Illegal-key-size-khi-dung-Cipher-chua-chac-phai-do-ban-code-sai.md","filePath":"short-blog/2024-11-08-trong-java-6-7-8-loi-Illegal-key-size-khi-dung-Cipher-chua-chac-phai-do-ban-code-sai.md","lastUpdated":1748773970000}'),s={name:"short-blog/2024-11-08-trong-java-6-7-8-loi-Illegal-key-size-khi-dung-Cipher-chua-chac-phai-do-ban-code-sai.md"},e=[n('<h1 id="trong-java-8-loi-illegal-key-size-khi-dung-cipher-chua-chac-phai-do-ban-code-sai-ma-la-do-java-policy-jce" tabindex="-1">Trong java 8 lỗi Illegal key size khi dùng Cipher chưa chắc phải do bạn code sai mà là do Java Policy JCE. <a class="header-anchor" href="#trong-java-8-loi-illegal-key-size-khi-dung-cipher-chua-chac-phai-do-ban-code-sai-ma-la-do-java-policy-jce" aria-label="Permalink to &quot;Trong java 8 lỗi Illegal key size khi dùng Cipher chưa chắc phải do bạn code sai mà là do Java Policy JCE.&quot;">​</a></h1><p>Khi bạn sử dụng Cipher để mã hóa dữ liệu trong Java, bạn có thể gặp phải lỗi <code>Illegal key size</code>.</p><p>Lỗi này thường xảy ra khi bạn sử dụng một key size lớn hơn 128 bits. Trong bài viết này, chúng ta sẽ tìm hiểu về lỗi này và cách khắc phục nó.</p><h2 id="loi-illegal-key-size" tabindex="-1">Lỗi <code>Illegal key size</code> <a class="header-anchor" href="#loi-illegal-key-size" aria-label="Permalink to &quot;Lỗi `Illegal key size`&quot;">​</a></h2><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">java.security.InvalidKeyException</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Illegal key size.</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Caused by</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.security.InvalidKeyException</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Illegal key size</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        at javax.crypto.Cipher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkCryptoPerm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cipher.java</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1039</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        at javax.crypto.Cipher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">implInit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cipher.java</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">805</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        at javax.crypto.Cipher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chooseProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cipher.java</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">864</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        at javax.crypto.Cipher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cipher.java</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1396</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        at javax.crypto.Cipher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cipher.java</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1327</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ... </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> common frames omitted</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Khi bạn sử dụng Cipher để mã hóa dữ liệu trong Java, bạn cần sử dụng một key size phù hợp với thuật toán mã hóa.</p><p>Ví dụ, nếu bạn sử dụng thuật toán AES, bạn cần sử dụng key size 128, 192 hoặc 256 bits.</p><p>Tuy nhiên, nếu phiên bản java là java 8 và thấp hơn <a href="https://www.oracle.com/java/technologies/javase/8u161-relnotes.html" target="_blank" rel="noreferrer">8u161</a>, mặc định Java chỉ hỗ trợ key size 128 bits cho AES. Nếu bạn sử dụng key size lớn hơn 128 bits, bạn sẽ gặp phải lỗi <code>Illegal key size</code>.</p><p><a href="https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8170157" target="_blank" rel="noreferrer">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8170157</a></p><h2 id="bang-duoi-đay-cho-thay-cac-phien-ban-mac-đinh-ho-tro-key-size-lon-hon-128-bits-va-link-download-chinh-sach-jce-cho-phien-ban-thap-hon" tabindex="-1">Bảng dưới đấy cho thấy các phiên bản mặc định hỗ trợ key size lớn hơn 128 bits và link download chính sách JCE cho phiên bản thấp hơn. <a class="header-anchor" href="#bang-duoi-đay-cho-thay-cac-phien-ban-mac-đinh-ho-tro-key-size-lon-hon-128-bits-va-link-download-chinh-sach-jce-cho-phien-ban-thap-hon" aria-label="Permalink to &quot;Bảng dưới đấy cho thấy các phiên bản mặc định hỗ trợ key size lớn hơn 128 bits và link download chính sách JCE cho phiên bản thấp hơn.&quot;">​</a></h2><table><thead><tr><th>Phiên bản Java</th><th>Phiên bản bắt đầu hỗ trợ</th></tr></thead><tbody><tr><td>Java 6</td><td>6u181</td></tr><tr><td>Java 7</td><td>7u171</td></tr><tr><td>Java 8</td><td>8u161</td></tr><tr><td>Java 9 hoặc mới hơn</td><td>9 hoặc mới hơn bắt đầu hỗ trợ ngay bản đầu tiên phát hành</td></tr></tbody></table><p>Một điều hạnh phúc là từ bản Java 9 mặc định đã hỗ trợ key size lớn hơn 128 bits cho AES vì vậy không cần lo lắng về điều này.</p><h2 id="java-cryptography-extension-jce-unlimited-strength-jurisdiction-policy-files-la-gi" tabindex="-1">Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files là gì ? <a class="header-anchor" href="#java-cryptography-extension-jce-unlimited-strength-jurisdiction-policy-files-la-gi" aria-label="Permalink to &quot;Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files là gì ?&quot;">​</a></h2><p>Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files là các tệp chính sách của Java cho phép ứng dụng sử dụng mã hóa mạnh với độ dài khóa không giới hạn, chẳng hạn như AES-256.</p><p>Trước Java 8u161, các phiên bản Java mặc định chỉ hỗ trợ mã hóa lên đến 128-bit vì <a href="https://en.wikipedia.org/wiki/Export_of_cryptography_from_the_United_States#Current_status" target="_blank" rel="noreferrer">chính sách hạn chế xuất khẩu mật mã từ Hoa Kỳ</a>. Để sử dụng các thuật toán với độ dài khóa lớn hơn như 192-bit hoặc 256-bit (cần cho AES-192 và AES-256), người dùng phải tải và cài đặt các tệp chính sách JCE không giới hạn từ trang web của Oracle.</p><p><img src="https://static-cdn.thanhlv.com/short-blog/images/2024-11-08-trong-java-6-7-8-loi-Illegal-key-size-khi-dung-Cipher-chua-chac-phai-do-ban-code-sai/image.jpg" alt=""></p><h2 id="chinh-sach-han-che-xuat-khau-mat-ma-tu-hoa-ky-la-gi" tabindex="-1">Chính sách hạn chế xuất khẩu mật mã từ Hoa Kỳ là gì ? <a class="header-anchor" href="#chinh-sach-han-che-xuat-khau-mat-ma-tu-hoa-ky-la-gi" aria-label="Permalink to &quot;Chính sách hạn chế xuất khẩu mật mã từ Hoa Kỳ là gì ?&quot;">​</a></h2><p>Chính sách hạn chế xuất khẩu mật mã từ Hoa Kỳ là một bộ quy định do chính phủ Hoa Kỳ đưa ra để kiểm soát việc xuất khẩu các công nghệ mã hóa mạnh ra ngoài lãnh thổ Hoa Kỳ. Mục tiêu của chính sách này là hạn chế sự phát triển và sử dụng các công nghệ mã hóa mạnh tại các quốc gia hoặc tổ chức mà Hoa Kỳ cho là có nguy cơ gây tổn hại đến an ninh quốc gia hoặc lợi ích chiến lược của mình.</p><p>Các quy định này được quản lý bởi Bureau of Industry and Security (BIS) thuộc Bộ Thương mại Hoa Kỳ, và chúng bao gồm các quy tắc về việc xuất khẩu phần mềm, phần cứng và công nghệ mã hóa, trong đó có yêu cầu về độ dài khóa mã hóa.</p><p>Các điểm chính trong chính sách:</p><ul><li><strong>Giới hạn độ dài khóa mã hóa</strong>: Ban đầu, Hoa Kỳ chỉ cho phép xuất khẩu các sản phẩm mã hóa có độ dài khóa tối đa là 56-bit (thường là đối với DES). Các sản phẩm với độ dài khóa mạnh hơn (như AES-128, AES-192, AES-256) bị hạn chế xuất khẩu.</li><li><strong>Mã hóa mạnh (Strong Encryption)</strong>: Các thuật toán mã hóa với khóa dài hơn (như AES-256) hoặc những sản phẩm sử dụng mã hóa mạnh bị coi là có tiềm năng được sử dụng cho mục đích quân sự hoặc có thể bị lạm dụng trong các hoạt động gián điệp. Điều này khiến các công ty phải tuân thủ các quy định chặt chẽ để xuất khẩu phần mềm hoặc phần cứng mã hóa ra nước ngoài.</li><li><strong>Giấy phép xuất khẩu</strong>: Các công ty muốn xuất khẩu công nghệ mã hóa mạnh phải xin giấy phép từ chính phủ Hoa Kỳ. Quá trình này thường rất phức tạp và yêu cầu kiểm tra chi tiết về công nghệ và các quốc gia mục tiêu.</li></ul><h2 id="toi-van-muon-su-dung-java-6-7-8-o-phien-ban-chua-ho-tro-lam-the-nao-đe-khac-phuc-loi-illegal-key-size" tabindex="-1">Tôi vẫn muốn sử dụng java 6 7 8 ở phiên bản chưa hỗ trợ, làm thế nào để khắc phục lỗi <code>Illegal key size</code> ? <a class="header-anchor" href="#toi-van-muon-su-dung-java-6-7-8-o-phien-ban-chua-ho-tro-lam-the-nao-đe-khac-phuc-loi-illegal-key-size" aria-label="Permalink to &quot;Tôi vẫn muốn sử dụng java 6 7 8 ở phiên bản chưa hỗ trợ, làm thế nào để khắc phục lỗi `Illegal key size` ?&quot;">​</a></h2><p>Nếu bạn đang sử dụng các phiên bản 6 7 8 và đang trong các phiên bản chưa hỗ trợ thì có thể vào link dưới đây để tải <code>Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy</code></p><table><thead><tr><th>Phiên bản Java</th><th>Link tải JCE</th></tr></thead><tbody><tr><td>Java 6</td><td><a href="https://www.oracle.com/java/technologies/jce-6-download.html" target="_blank" rel="noreferrer">https://www.oracle.com/java/technologies/jce-6-download.html</a></td></tr><tr><td>Java 7</td><td><a href="https://www.oracle.com/java/technologies/javase-jce7-downloads.html" target="_blank" rel="noreferrer">https://www.oracle.com/java/technologies/javase-jce7-downloads.html</a></td></tr><tr><td>Java 8</td><td><a href="https://www.oracle.com/java/technologies/javase-jce8-downloads.html" target="_blank" rel="noreferrer">https://www.oracle.com/java/technologies/javase-jce8-downloads.html</a></td></tr></tbody></table><h2 id="tom-tat" tabindex="-1">Tóm tắt <a class="header-anchor" href="#tom-tat" aria-label="Permalink to &quot;Tóm tắt&quot;">​</a></h2><ul><li>Lỗi Illegal key size xảy ra khi sử dụng key size lớn hơn 128 bits trong Java 8 và các phiên bản thấp hơn.</li><li>Để sử dụng key size lớn hơn 128 bits trong các phiên bản Java cũ hơn, cần cài đặt Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files.</li><li>JCE Unlimited Strength Jurisdiction Policy Files cho phép sử dụng mã hóa mạnh với độ dài khóa không giới hạn.</li><li>Các phiên bản Java hỗ trợ key size lớn hơn 128 bits: Java 6u181, Java 7u171, Java 8u161, Java 9 và các phiên bản mới hơn.</li></ul>',26)];const l=a(s,[["render",function(a,n,t,s,l,c){return h(),i("div",null,e)}]]);export{t as __pageData,l as default};
