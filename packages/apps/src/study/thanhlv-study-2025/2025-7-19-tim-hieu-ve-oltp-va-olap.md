---
footer: true
title: T√¨m hi·ªÉu v·ªÅ OLTP v√† OLAP trong h·ªá th·ªëng c∆° s·ªü d·ªØ li·ªáu
authors: [ lethanh ]
description:  OLTP (Online Transaction Processing) v√† OLAP (Online Analytical Processing) l√† hai lo·∫°i h·ªá th·ªëng qu·∫£n l√Ω c∆° s·ªü d·ªØ li·ªáu v·ªõi m·ª•c ƒë√≠ch v√† c√°ch s·ª≠ d·ª•ng kh√°c nhau.
date: 2025-07-19
outline: deep
image: https://static-cdn.thanhlv.com/study/thanhlv-study-2025/2025-06-16-gioi-thieu-ve-kubernetes/kubernetes2.png
draft: false
group: 3. Database & Database Advanced 2024
---

# 1. OLTP vs OLAP
OLTP (Online Transaction Processing) v√† OLAP (Online Analytical Processing) l√† hai lo·∫°i h·ªá th·ªëng qu·∫£n l√Ω c∆° s·ªü d·ªØ li·ªáu v·ªõi m·ª•c ƒë√≠ch v√† c√°ch s·ª≠ d·ª•ng kh√°c nhau.

M·ªói m·ªôt lo·∫°i h·ªá th·ªëng n√†y ƒë·ªÅu c√≥ nh·ªØng ƒë·∫∑c ƒëi·ªÉm ri√™ng bi·ªát, ph√π h·ª£p v·ªõi c√°c nhu c·∫ßu kh√°c nhau trong vi·ªác x·ª≠ l√Ω d·ªØ li·ªáu. V√¨ v·∫≠y, vi·ªác hi·ªÉu r√µ s·ª± kh√°c bi·ªát gi·ªØa OLTP v√† OLAP l√† r·∫•t quan tr·ªçng trong vi·ªác thi·∫øt k·∫ø v√† tri·ªÉn khai h·ªá th·ªëng c∆° s·ªü d·ªØ li·ªáu.

## 1.1 OLTP (Online Transaction Processing)

### 1.1.1 ƒê·ªãnh nghƒ©a v·ªÅ OLTP

Online transaction processing (OLTP) l√† m·ªôt lo·∫°i h·ªá th·ªëng qu·∫£n l√Ω c∆° s·ªü d·ªØ li·ªáu(Database) ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ qu·∫£n l√Ω th·ª±c hi·ªán m·ªôt l∆∞·ª£ng l·ªõn c√°c giao d·ªãch.

C√°c giao d·ªãch n√†y th∆∞·ªùng l√† c√°c giao d·ªãch nh·ªè, nhanh ch√≥ng v√† th∆∞·ªùng xuy√™n, nh∆∞ th√™m, s·ª≠a, x√≥a ho·∫∑c truy v·∫•n d·ªØ li·ªáu. 

OLTP ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c√°c ·ª©ng d·ª•ng y√™u c·∫ßu t√≠nh to√†n v·∫πn d·ªØ li·ªáu cao v√† kh·∫£ nƒÉng x·ª≠ l√Ω giao d·ªãch nhanh ch√≥ng.

ƒê√¢y l√† h·ªá qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu m√† h·∫ßu h·∫øt c√°c ·ª©ng d·ª•ng c·ªßa ch√∫ng ta t∆∞∆°ng t√°c ng√†y nay.

C√°c h·ªá th·ªëng ng√¢n h√†ng, m√°y ATM, giao d·ªãch t√≠n d·ª•ng, th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠...

OLTP ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a cho c√°c giao d·ªãch nhanh ch√≥ng v√† hi·ªáu qu·∫£, th∆∞·ªùng l√† c√°c thao t√°c CRUD (Create, Read, Update, Delete) tr√™n d·ªØ li·ªáu v√† ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn c·ªßa d·ªØ li·ªáu.

M·ª•c ti√™u ch√≠nh c·ªßa OLTP l√† : t·ªëc ƒë·ªô, ƒë·ªô ch√≠nh x√°c v√† t√≠nh to√†n v·∫πn c·ªßa d·ªØ li·ªáu.


### 1.1.2 Ph√¢n t√≠ch t·ª´ `Giao d·ªãch(Transaction)`

M·ªôt trong nh·ªØng hi·ªÉu nh·∫ßm ph·ªï bi·∫øn v·ªÅ OLTP l√† t·ª´ `giao d·ªãch (transaction)`. M·ªçi ng∆∞·ªùi th∆∞·ªùng nghƒ© r·∫±ng giao d·ªãch l√† m·ªôt thao t√°c ghi d·ªØ li·ªáu ƒë∆°n l·∫ª b·∫±ng c√¢u l·ªánh `INSERT`, `UPDATE`, ho·∫∑c `DELETE`.

Tuy nhi√™n, trong ng·ªØ c·∫£nh c·ªßa OTLP, m·ªôt giao d·ªãch l√† m·ªôt t·∫≠p h∆°n c√°c c√¥ng vi·ªác logic`(logical unit of work)`, n√≥ c√≥ th·ªÉ b·∫£o g·ªìm m·ªôt chu·ªói nhi·ªÅu thao t√°c ri√™ng l·∫ª nh∆∞ng n√≥ ph·∫£i ƒë∆∞·ª£c th·ª±c hi·ªán nh∆∞ m·ªôt ƒë∆°n v·ªã duy nh·∫•t.

**M·ªôt v√≠ d·ª• kinh ƒëi·ªÉn v·ªÅ giao d·ªãch l√† vi·ªác chuy·ªÉn ti·ªÅn t·ª´ t√†i kho·∫£n A sang t√†i kho·∫£n B.**

Logical unit of work c·ªßa giao d·ªãch n√†y bao g·ªìm hai thao t√°c:
- Tr·ª´ ti·ªÅn t·ª´ t√†i kho·∫£n A
- C·ªông ti·ªÅn t∆∞∆°ng ·ª©ng v√†o t√†i kho·∫£n B

H·ªá th·ªëng OLTP, ƒë·∫£m b·∫£o r·∫±ng c·∫£ hai thao t√°c n√†y ph·∫£i th√†nh c√¥ng ho·∫∑c kh√¥ng c√≥ g√¨ thay ƒë·ªïi trong c∆° s·ªü d·ªØ li·ªáu. N·∫øu m·ªôt trong hai thao t√°c th·∫•t b·∫°i, to√†n b·ªô giao d·ªãch s·∫Ω b·ªã h·ªßy b·ªè (rollback) ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn c·ªßa d·ªØ li·ªáu.

Kh√¥ng th·ªÉ c√≥ tr∆∞·ªùng h·ª£p ti·ªÅn ƒë√£ b·ªã tr·ª´ kh·ªèi t√†i kho·∫£n A nh∆∞ng ch∆∞a ƒë∆∞·ª£c c·ªông v√†o t√†i kho·∫£n B. Tr·∫°ng th√°i **d·ªü dang** n√†y s·∫Ω l√†m h·ªèng t√≠nh to√†n v·∫πn c·ªßa d·ªØ li·ªáu v√† g√¢y t·ªïn th·∫•t t√†i ch√≠nh. Ch√≠nh v√¨ v·∫≠y, b·∫£n ch·∫•t c·ªßa OLTP l√† qu·∫£n l√Ω c√°c ƒë∆°n v·ªã c√¥ng vi·ªác logic n√†y m·ªôt c√°ch an to√†n v√† ƒë√°ng tin c·∫≠y.

```plantuml
@startuml Transaction in OLTP System

!define FONTAWESOME https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/master/font-awesome-5
!include FONTAWESOME/users.puml
!include FONTAWESOME/database.puml
!include FONTAWESOME/money_bill_wave.puml
!include FONTAWESOME/exchange_alt.puml
!include FONTAWESOME/check_circle.puml
!include FONTAWESOME/times_circle.puml

skinparam sequenceArrowThickness 2
skinparam roundcorner 20
skinparam participantpadding 20
skinparam backgroundColor white
skinparam handwritten false
skinparam monochrome false
skinparam shadowing false

autonumber "<b>[00]"


actor "User" as user
participant "Banking Application" as app
participant "Transaction Manager" as tm
database "Database" as db

note over tm: OLTP Transaction = Logical Unit of Work
note right of user: Chuy·ªÉn 100$ t·ª´ t√†i kho·∫£n A sang B

user -> app: Y√™u c·∫ßu chuy·ªÉn ti·ªÅn
app -> tm: B·∫Øt ƒë·∫ßu giao d·ªãch (BEGIN TRANSACTION)

group Successful Transaction Scenario
    tm -> db: Ki·ªÉm tra s·ªë d∆∞ t√†i kho·∫£n A
    db --> tm: Tr·∫£ v·ªÅ s·ªë d∆∞ (ƒë·ªß ƒë·ªÉ chuy·ªÉn)
    tm -> db: UPDATE - Tr·ª´ 100$ t·ª´ t√†i kho·∫£n A
    db --> tm: X√°c nh·∫≠n tr·ª´ ti·ªÅn th√†nh c√¥ng
    tm -> db: UPDATE - C·ªông 100$ v√†o t√†i kho·∫£n B
    db --> tm: X√°c nh·∫≠n c·ªông ti·ªÅn th√†nh c√¥ng
    tm -> db: COMMIT TRANSACTION
    db --> tm: X√°c nh·∫≠n commit th√†nh c√¥ng
    tm --> app: Giao d·ªãch ho√†n t·∫•t
    app --> user: Th√¥ng b√°o chuy·ªÉn ti·ªÅn th√†nh c√¥ng
end

note over tm, db #lightgreen: C·∫£ hai thao t√°c ph·∫£i th√†nh c√¥ng\nho·∫∑c kh√¥ng c√≥ g√¨ thay ƒë·ªïi

group Failed Transaction Scenario
    tm -> db: Ki·ªÉm tra s·ªë d∆∞ t√†i kho·∫£n A
    db --> tm: Tr·∫£ v·ªÅ s·ªë d∆∞ (ƒë·ªß ƒë·ªÉ chuy·ªÉn)
    tm -> db: UPDATE - Tr·ª´ 100$ t·ª´ t√†i kho·∫£n A
    db --> tm: X√°c nh·∫≠n tr·ª´ ti·ªÅn th√†nh c√¥ng
    tm -> db: UPDATE - C·ªông 100$ v√†o t√†i kho·∫£n B
    db --> tm: L·ªói khi c·ªông ti·ªÅn (v√≠ d·ª•: t√†i kho·∫£n B ƒë√£ b·ªã kh√≥a)
    tm -> db: ROLLBACK TRANSACTION
    db --> tm: X√°c nh·∫≠n rollback th√†nh c√¥ng (m·ªçi thay ƒë·ªïi ƒë·ªÅu b·ªã h·ªßy)
    tm --> app: Giao d·ªãch th·∫•t b·∫°i
    app --> user: Th√¥ng b√°o l·ªói chuy·ªÉn ti·ªÅn
end

note over tm, db #pink: N·∫øu m·ªôt thao t√°c th·∫•t b·∫°i,\nto√†n b·ªô giao d·ªãch ƒë∆∞·ª£c rollback

@enduml

```

### 1.1.3 ƒê·∫∑c ƒëi·ªÉm c·ªßa OLTP
- **T·∫≠p trung v√†o giao d·ªãch**: OLTP ƒë∆∞·ª£c t·ªëi ∆∞u cho vi·ªác truy v·∫•n ,ghi, c·∫≠p nh·∫≠t, x√≥a c√°c m·∫©u d·ªØ li·ªáu nh·ªè m·ªôt c√°ch nhanh ch√≥ng. M·ªôt thao t√°c n√†y th∆∞·ªùng ƒë∆∞·ª£c g·ªçi l√† m·ªôt giao d·ªãch (transaction).
- **T·ªëc ƒë·ªô c·ª±c nhanh**: OLTP ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ x·ª≠ l√Ω h√†ng tri·ªáu giao d·ªãch m·ªói ng√†y. M·ªói m·ªôt giao d·ªãch ch·ªâ m·∫•t v√†i mili gi√¢y(ms) ƒë·ªÉ ho√†n th√†nh.
  - Khi mua h√†ng, h√†ng t·ªìn kho s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t ngay l·∫≠p t·ª©c ƒë·ªÉ ng∆∞·ªùi kh√°c kh√¥ng ƒë·∫∑t m√≥n h√†ng ƒë√£ h·∫øt.
- **Nhi·ªÅu ng∆∞·ªùi d√πng c√πng l√∫c**: H·ªá th·ªëng OLTP ƒë∆∞·ª£c t·ªëi ∆∞u ƒë·ªÉ x·ª≠ l√Ω c√°c giao d·ªãch nh·ªè t·ª´ h√†ng tri·ªáu ng∆∞·ªùi d√πng c√πng m·ªôt l√∫c. ƒê·∫£m b·∫£o r·∫±ng h·ªá th·ªëng c√≥ th·ªÉ x·ª≠ l√Ω h√†ng tri·ªáu giao d·ªãch m·ªói ng√†y m√† kh√¥ng g·∫∑p ph·∫£i t√¨nh tr·∫°ng ngh·∫Ωn c·ªï chai.
- **T√≠nh to√†n v·∫πn d·ªØ li·ªáu**: OLTP ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn c·ªßa d·ªØ li·ªáu th√¥ng qua c√°c giao d·ªãch ACID (Atomicity, Consistency, Isolation, Durability). ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† m·ªói giao d·ªãch ph·∫£i ho√†n th√†nh th√†nh c√¥ng ho·∫∑c kh√¥ng c√≥ g√¨ thay ƒë·ªïi trong c∆° s·ªü d·ªØ li·ªáu.
- **C∆° s·ªü d·ªØ li·ªáu quan h·ªá**: OLTP th∆∞·ªùng s·ª≠ d·ª•ng c∆° s·ªü d·ªØ li·ªáu quan h·ªá (RDBMS) nh∆∞ MySQL, PostgreSQL, Oracle, SQL Server... ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu. C√°c b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu ƒë∆∞·ª£c li√™n k·∫øt v·ªõi nhau th√¥ng qua c√°c kh√≥a ngo·∫°i (foreign key).
- **D·ªØ li·ªáu lu√¥n m·ªõi v√† ch√≠nh x√°c**: D·ªØ li·ªáu trong h·ªá th·ªëng OLTP ph·∫£n √°nh tr·∫°ng th√°i m·ªõi nh·∫•t c·ªßa ho·∫°t ƒë·ªông kinh doanh. 
  - V√≠ d·ª•, s·ªë d∆∞ t√†i kho·∫£n ng√¢n h√†ng c·ªßa b·∫°n lu√¥n ƒë∆∞·ª£c c·∫≠p nh·∫≠t ch√≠nh x√°c sau m·ªói l·∫ßn giao d·ªãch.

### 1.1.4 Cam K·∫øt To√†n V·∫πn D·ªØ Li·ªáu: Ph√¢n T√≠ch Chuy√™n S√¢u v·ªÅ C√°c Thu·ªôc T√≠nh ACID

T·∫•t c·∫£ c√°c h·ªá th·ªëng OLTP ƒë·ªÅu cam k·∫øt t√≠nh to√†n v·∫πn d·ªØ li·ªáu th√¥ng qua c√°c thu·ªôc t√≠nh ACID (Atomicity, Consistency, Isolation, Durability).

B·ªën thu·ªôc t√≠nh ACID l√† ti√™u chu·∫©n v√†ng trong vi·ªác ƒë·∫£m b·∫£o r·∫±ng c√°c giao d·ªãch trong h·ªá th·ªëng OLTP ƒë∆∞·ª£c th·ª±c hi·ªán m·ªôt c√°ch an to√†n v√† ƒë√°ng tin c·∫≠y.

B·ªën thu·ªôc t√≠nh ACID trong c∆° s·ªü d·ªØ li·ªáu ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a nh∆∞ sau:

#### 1.1.4.1 Atomicity (T√≠nh nguy√™n t·ª≠)

T√≠nh ch·∫•t n√†y ƒë·∫£ b·∫£o m·ªôt l√† giao d·ªãch ƒë∆∞·ª£c th·ª±c hi·ªán nh∆∞ m·ªôt ƒë∆°n v·ªã duy nh·∫•t v√† kh√¥ng th·ªÉ chia nh·ªè, n√≥ ph·∫£i ƒë∆∞·ª£c ho√†n th√†nh to√†n b·ªô ho·∫∑c kh√¥ng c√≥ g√¨ x·∫£y ra.

N·∫øu b·∫•t k·ª≥ m·ªôt ph·∫ßn nh·ªè n√†o trong giao d·ªãch b·ªã th·∫•t b·∫°i, to√†n b·ªô giao d·ªãch s·∫Ω b·ªã h·ªßy b·ªè (rollback) v√† kh√¥ng c√≥ thay ƒë·ªïi n√†o ƒë∆∞·ª£c ghi v√†o c∆° s·ªü d·ªØ li·ªáu.

##### 1.1.4.2 M·ª•c ƒë√≠ch:
M·ª•c ƒë√≠ch ch√≠nh c·ªßa t√≠nh Atomicity (T√≠nh nguy√™n t·ª≠) l√† ngƒÉn ch·∫∑n d·ªØ li·ªáu r∆°i v√†o t√¨nh tr·∫°ng kh√¥ng nh·∫•t qu√°n ho·∫∑c kh√¥ng ƒë·∫ßy ƒë·ªß.

T√≠nh nguy√™n t·ª≠ ƒë·∫£m b·∫£o r·∫±ng c√°c ho·∫°t ƒë·ªông c√≥ li√™n quan ƒë·∫øn nhau ƒë∆∞·ª£c x·ª≠ l√Ω nh∆∞ l√† m·ªôt ho·∫°t ƒë·ªông duy nh·∫•t. Lo·∫°i b·ªè nguy c∆° ch·ªâ m·ªôt ph·∫ßn c·ªßa giao d·ªãch ƒë∆∞·ª£c ghi l·∫°i.
 
##### 1.1.4.3 C∆° ch·∫ø ho·∫°t ƒë·ªông

DBMS th∆∞·ªùng s·ª≠ d·ª•ng m·ªôt c∆° ch·∫ø g·ªçi l√† `Transaction Log` v√† `C∆° ch·∫ø Rollback` ƒë·ªÉ h·ªó tr·ª£ th·ª±c hi·ªán t√≠nh nguy√™n t·ª≠.

###### 1.1.4.3.1  Ghi nh·∫≠t k√Ω giao d·ªãch (Transaction Log / Write-Ahead Logging - WAL) üìù
ƒê√¢y l√† m·ªôt ph∆∞∆°ng ph√°p ph·ªï bi·∫øn. Tr∆∞·ªõc khi th·ª±c hi·ªán b·∫•t k·ª≥ thay ƒë·ªïi n√†o v·ªõi d·ªØ li·ªáu, DBMS s·∫Ω ghi l·∫°i c√°c thay ƒë·ªïi n√†y v√†o m·ªôt nh·∫≠t k√Ω giao d·ªãch (transaction log).

Truy tr√¨nh nh∆∞ sau:

1. B·∫Øt ƒë·∫ßu giao d·ªãch(`Begin Transaction`) : M·ªôt b·∫£n ghi ƒë∆∞·ª£c ƒë√°nh d·∫•u s·ª± b·∫Øt ƒë·∫ßu c·ªßa giao d·ªãch ƒë∆∞·ª£c ghi v√†o transaction log.
2. Ghi l·∫°i thay ƒë·ªïi: 
- ƒê·ªëi v·ªõi m·ªói thao t√°c s·ª≠a ƒë·ªïi d·ªØ li·ªáu (INSERT, UPDATE, DELETE), m·ªôt b·∫£n ghi trong transaction log ƒë∆∞·ª£c t·∫°o ra. B·∫£n ghi n√†y ch·ª©a th√¥ng tin c·∫ßn thi·∫øt ƒë·ªÉ ho√†n t√°c (undo) ho·∫∑c l√†m l·∫°i (redo) thao t√°c ƒë√≥.
  - **Undo log**: Ghi l·∫°i d·ªØ li·ªáu c≈© tr∆∞·ªõc khi thay ƒë·ªïi. ƒê·ªÉ c√≥ th·ªÉ ho√†n t√°c n·∫øu c·∫ßn.
  - **Redo log**: Ghi l·∫°i d·ªØ li·ªáu m·ªõi sau khi thay ƒë·ªïi. ƒê·ªÉ c√≥ th·ªÉ th·ª±c hi·ªán l·∫°i n·∫øu c·∫ßn thi·∫øt.
3. Commit giao d·ªãch(`Commit Transaction`): N·∫øu t·∫•t c·∫£ c√°c thao t√°c trong giao d·ªãch ho√†n th√†nh th√†nh c√¥ng. M·ªôt b·∫£n ghi commit ƒë∆∞·ª£c ghi v√†o transaction log. ƒêi·ªÅu n√†y cho ph√©p DBMS bi·∫øt r·∫±ng t·∫•t c·∫£ c√°c thay ƒë·ªïi trong giao d·ªãch ƒë√£ ho√†n th√†nh v√† c√≥ th·ªÉ ƒë∆∞·ª£c √°p d·ª•ng v√†o c∆° s·ªü d·ªØ li·ªáu. T·∫°i th·ªùi ƒëi·ªÉm n√†y, thay ƒë·ªïi ƒë∆∞·ª£c coi l√† vƒ©nh vi·ªÖn v√† ƒë∆∞·ª£c ghi v√†o database ch√≠nh.
4. Rollback giao d·ªãch(`Rollback Transaction`): N·∫øu c√≥ l·ªói x·∫£y ra trong qu√° tr√¨nh th·ª±c hi·ªán giao d·ªãch, m·ªôt b·∫£n ghi rollback ƒë∆∞·ª£c ghi v√†o transaction log. DBMS s·∫Ω s·ª≠ d·ª•ng th√¥ng tin trong undo log ƒë·ªÉ ho√†n t√°c t·∫•t c·∫£ c√°c thay ƒë·ªïi ƒë√£ th·ª±c hi·ªán trong giao d·ªãch, ƒë∆∞a c∆° s·ªü d·ªØ li·ªáu tr·ªü v·ªÅ tr·∫°ng th√°i tr∆∞·ªõc khi giao d·ªãch b·∫Øt ƒë·∫ßu.

###### 1.1.3.4.2 C∆° ch·∫ø Rollback (Ho√†n t√°c) ‚è™
C∆° ch·∫ø Rollback s·ª≠ d·ª•ng th√¥ng tin trong nh·∫≠t k√Ω giao d·ªãch ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh Atomicity khi c√≥ s·ª± c·ªë.

**Khi x·∫£y ra l·ªói**: v√≠ d·ª• nh∆∞ giao d·ªãch l·ªói, m·∫•t ƒëi·ªán, l·ªói ph·∫ßn m·ªÅm... h·ªá th·ªëng s·∫Ω ƒë·ªçc nh·∫≠t k√Ω giao d·ªãch ƒë·ªÉ x√°c ƒë·ªãnh c√°c thay ƒë·ªïi ƒë√£ th·ª±c hi·ªán v√† ho√†n t√°c ch√∫ng.

**S·ª≠ d·ª•ng th√¥ng tin Undo**: H·ªá th·ªëng s·∫Ω t√¨m t·∫•t c·∫£ c√°c thay ƒë·ªïi thu·ªôc v·ªÅ giao d·ªãch b·ªã l·ªói v√† s·ª≠ d·ª•ng th√¥ng tin `undo` ƒë√£ ƒë∆∞·ª£c ghi l·∫°i ƒë·ªÉ kh√¥i ph·ª•c v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu ngay tr∆∞·ªõc khi transaction b·∫Øt ƒë·∫ßu. Quy tr√¨nh n√†y ƒë∆∞·ª£c g·ªçi l√† "rollback".

Nh·ªù c√≥ c∆° ch·∫ø rollback, h·ªá th·ªëng c√≥ th·ªÉ ƒë·∫£m b·∫£o r·∫±ng kh√¥ng c√≥ thay ƒë·ªïi n√†o ƒë∆∞·ª£c ghi v√†o c∆° s·ªü d·ªØ li·ªáu n·∫øu giao d·ªãch kh√¥ng ho√†n th√†nh th√†nh c√¥ng.


##### Flow v√≠ d·ª• v·ªÅ Atomicity

Flow v√≠ d·ª• v·ªÅ giao d·ªãch chuy·ªÉn ti·ªÅn t·ª´ t√†i kho·∫£n A sang t√†i kho·∫£n B trong h·ªá th·ªëng OLTP, th·ªÉ hi·ªán t√≠nh nguy√™n t·ª≠ c·ªßa giao d·ªãch:

###### Flow v·ªÅ giao d·ªãch th√†nh c√¥ng
```plantuml
@startuml Atomicity in Database Management Systems

!define FONTAWESOME https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/master/font-awesome-5
!include FONTAWESOME/users.puml
!include FONTAWESOME/database.puml
!include FONTAWESOME/file_alt.puml
!include FONTAWESOME/check_circle.puml
!include FONTAWESOME/times_circle.puml
!include FONTAWESOME/undo_alt.puml
!include FONTAWESOME/redo_alt.puml

skinparam sequenceArrowThickness 2
skinparam roundcorner 15
skinparam participantpadding 30
skinparam backgroundColor white
skinparam handwritten false
skinparam monochrome false
skinparam shadowing false

autonumber "<b>[00]"

actor "Client Application" as client
participant "Transaction Manager" as tm
participant "Database Engine" as dbengine
database "Transaction Log" as log
database "Database" as db

note over log: Write-Ahead Logging (WAL)

title <b>Atomicity in DBMS - Transaction Processing with Write-Ahead Logging

== Successful Transaction Scenario ==

client -> tm: BEGIN TRANSACTION (Chuy·ªÉn ti·ªÅn A ‚Üí B)
tm -> log: Ghi b·∫£n ghi BEGIN TRANSACTION
log --> tm: X√°c nh·∫≠n ghi log

group Thao t√°c 1: Tr·ª´ ti·ªÅn t·ª´ t√†i kho·∫£n A
    tm -> dbengine: UPDATE account_A SET balance = balance - 100
    dbengine -> log: Ghi UNDO log (d·ªØ li·ªáu c≈© c·ªßa A)
    log --> dbengine: X√°c nh·∫≠n ghi UNDO log
    dbengine -> log: Ghi REDO log (d·ªØ li·ªáu m·ªõi c·ªßa A)
    log --> dbengine: X√°c nh·∫≠n ghi REDO log
    dbengine -> db: C·∫≠p nh·∫≠t d·ªØ li·ªáu trong b·ªô nh·ªõ ƒë·ªám
    db --> dbengine: X√°c nh·∫≠n c·∫≠p nh·∫≠t
    dbengine --> tm: Thao t√°c 1 ho√†n th√†nh
end

group Thao t√°c 2: C·ªông ti·ªÅn v√†o t√†i kho·∫£n B
    tm -> dbengine: UPDATE account_B SET balance = balance + 100
    dbengine -> log: Ghi UNDO log (d·ªØ li·ªáu c≈© c·ªßa B)
    log --> dbengine: X√°c nh·∫≠n ghi UNDO log
    dbengine -> log: Ghi REDO log (d·ªØ li·ªáu m·ªõi c·ªßa B)
    log --> dbengine: X√°c nh·∫≠n ghi REDO log
    dbengine -> db: C·∫≠p nh·∫≠t d·ªØ li·ªáu trong b·ªô nh·ªõ ƒë·ªám
    db --> dbengine: X√°c nh·∫≠n c·∫≠p nh·∫≠t
    dbengine --> tm: Thao t√°c 2 ho√†n th√†nh
end

tm -> log: Ghi b·∫£n ghi COMMIT TRANSACTION
log --> tm: X√°c nh·∫≠n ghi log commit
tm -> dbengine: Y√™u c·∫ßu ƒë·∫©y d·ªØ li·ªáu t·ª´ b·ªô ƒë·ªám v√†o DB
dbengine -> db: L∆∞u c√°c thay ƒë·ªïi v√†o DB (durable)
db --> dbengine: X√°c nh·∫≠n l∆∞u d·ªØ li·ªáu
dbengine --> tm: Commit ho√†n t·∫•t
tm --> client: Giao d·ªãch th√†nh c√¥ng << FA5_CHECK_CIRCLE >>

note over tm, db #lightgreen: Giao d·ªãch ho√†n th√†nh ƒë·∫ßy ƒë·ªß\nT·∫•t c·∫£ thay ƒë·ªïi ƒë∆∞·ª£c l∆∞u v√†o DB


@enduml

```

###### Flow v·ªÅ giao d·ªãch th·∫•t b·∫°i v√† ƒë∆∞·ª£c rollback

```plantuml
@startuml Atomicity in Database Management Systems

!define FONTAWESOME https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/master/font-awesome-5
!include FONTAWESOME/users.puml
!include FONTAWESOME/database.puml
!include FONTAWESOME/file_alt.puml
!include FONTAWESOME/check_circle.puml
!include FONTAWESOME/times_circle.puml
!include FONTAWESOME/undo_alt.puml
!include FONTAWESOME/redo_alt.puml

skinparam sequenceArrowThickness 2
skinparam roundcorner 15
skinparam participantpadding 30
skinparam backgroundColor white
skinparam handwritten false
skinparam monochrome false
skinparam shadowing false

autonumber "<b>[00]"

actor "Client Application" as client
participant "Transaction Manager" as tm
participant "Database Engine" as dbengine
database "Transaction Log" as log
database "Database" as db

note over log: Write-Ahead Logging (WAL)

title <b>Atomicity in DBMS - Transaction Processing with Write-Ahead Logging

== Failed Transaction Scenario ==

client -> tm: BEGIN TRANSACTION (Chuy·ªÉn ti·ªÅn A ‚Üí B)
tm -> log: Ghi b·∫£n ghi BEGIN TRANSACTION
log --> tm: X√°c nh·∫≠n ghi log

group Thao t√°c 1: Tr·ª´ ti·ªÅn t·ª´ t√†i kho·∫£n A
    tm -> dbengine: UPDATE account_A SET balance = balance - 100
    dbengine -> log: Ghi UNDO log (d·ªØ li·ªáu c≈© c·ªßa A)
    log --> dbengine: X√°c nh·∫≠n ghi UNDO log
    dbengine -> log: Ghi REDO log (d·ªØ li·ªáu m·ªõi c·ªßa A)
    log --> dbengine: X√°c nh·∫≠n ghi REDO log
    dbengine -> db: C·∫≠p nh·∫≠t d·ªØ li·ªáu trong b·ªô nh·ªõ ƒë·ªám
    db --> dbengine: X√°c nh·∫≠n c·∫≠p nh·∫≠t
    dbengine --> tm: Thao t√°c 1 ho√†n th√†nh
end

group Thao t√°c 2: C·ªông ti·ªÅn v√†o t√†i kho·∫£n B (L·ªói)
    tm -> dbengine: UPDATE account_B SET balance = balance + 100
    dbengine -> log: Ghi UNDO log (d·ªØ li·ªáu c≈© c·ªßa B)
    log --> dbengine: X√°c nh·∫≠n ghi UNDO log
    dbengine -> log: Ghi REDO log (d·ªØ li·ªáu m·ªõi c·ªßa B)
    log --> dbengine: X√°c nh·∫≠n ghi REDO log
    dbengine -> db: C·∫≠p nh·∫≠t d·ªØ li·ªáu trong b·ªô nh·ªõ ƒë·ªám
    db --> dbengine: L·ªói (t√†i kho·∫£n B ƒë√£ b·ªã kh√≥a) << FA5_TIMES_CIRCLE >>
    dbengine --> tm: B√°o l·ªói thao t√°c 2
end

tm -> log: Ghi b·∫£n ghi ROLLBACK TRANSACTION
log --> tm: X√°c nh·∫≠n ghi log rollback

group C∆° ch·∫ø Rollback << FA5_UNDO_ALT >>
    tm -> dbengine: Y√™u c·∫ßu ho√†n t√°c giao d·ªãch
    dbengine -> log: ƒê·ªçc UNDO logs c·ªßa giao d·ªãch
    log --> dbengine: Tr·∫£ v·ªÅ UNDO logs
    dbengine -> db: Kh√¥i ph·ª•c tr·∫°ng th√°i t√†i kho·∫£n A
    db --> dbengine: X√°c nh·∫≠n kh√¥i ph·ª•c
    dbengine --> tm: Rollback ho√†n t·∫•t
end

tm --> client: Giao d·ªãch th·∫•t b·∫°i << FA5_TIMES_CIRCLE >>

note over tm, db #pink: Giao d·ªãch b·ªã h·ªßy b·ªè (rollback)\nKh√¥ng c√≥ thay ƒë·ªïi n√†o ƒë∆∞·ª£c l∆∞u v√†o DB

@enduml
```
#### 1.1.5.1 Consistency (T√≠nh nh·∫•t qu√°n)

T√≠nh nh·∫•t qu√°n ƒë·∫£m b·∫£o r·∫±ng c∆° s·ªü d·ªØ li·ªáu lu√¥n ·ªü tr·∫°ng th√°i h·ª£p l·ªá tr∆∞·ªõc v√† sau khi giao d·ªãch.

D·ªØ li·ªáu s·∫Ω t·ª´ m·ªôt tr·∫°ng th√°i h·ª£p l·ªá (valid state) sang m·ªôt tr·∫°ng th√°i h·ª£p l·ªá kh√°c sau khi giao d·ªãch ho√†n th√†nh.

N√≥i ƒë∆°n gi·∫£n, d·ªØ li·ªáu ph·∫£i ƒë√∫ng ƒë·∫Øn theo quy t·∫Øc ƒë√£ ƒë·ªãnh tr∆∞·ªõc, v√† kh√¥ng c√≥ d·ªØ li·ªáu n√†o b·ªã m·∫•t ho·∫∑c b·ªã h·ªèng trong qu√° tr√¨nh giao d·ªãch.

##### 1.1.5.2 M·ª•c ƒë√≠ch:

M·ª•c ƒë√≠ch ch√≠nh c·ªßa t√≠nh Consistency (T√≠nh nh·∫•t qu√°n) l√† b·∫£o v·ªá t√≠nh to√†n v·∫πn c·ªßa d·ªØ li·ªáu trong c∆° s·ªü d·ªØ li·ªáu. N√≥ ho·∫°t ƒë·ªông nh∆∞ m·ªôt ng∆∞·ªùi b·∫£o v·ªá, ngƒÉn ch·∫∑n m·ªçi giao d·ªãch t·∫°o ra c√°c d·ªØ li·ªáu vi ph·∫°m quy t·∫Øc.

Khi vi ph·∫°m quy t·∫Øc, h·ªá th·ªëng s·∫Ω t·ª´ ch·ªëi giao d·ªãch v√† kh√¥ng cho ph√©p thay ƒë·ªïi n√†o ƒë∆∞·ª£c th·ª±c hi·ªán.


##### 1.1.5.3 C∆° ch·∫ø ho·∫°t ƒë·ªông

###### 1.1.5.3.1 R√†ng bu·ªôc d·ªØ li·ªáu (Data Constraints)

ƒê√¢y l√† c∆° ch·∫ø ph√≤ng tuy·∫øn ƒë·∫ßu ti√™n v√† l√† c∆° b·∫£n nh·∫•t ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n. C√°c r√†ng bu·ªôc l√† c√°c quy t·∫Øc ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a tr·ª±c ti·∫øp tr√™n column c·ªßa b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu.

Khi m·ªôt c√¢u l·ªánh `INSERT`, `UPDATE`, ho·∫∑c `DELETE` ƒë∆∞·ª£c th·ª±c hi·ªán, h·ªá th·ªëng s·∫Ω ki·ªÉm tra c√°c r√†ng bu·ªôc n√†y ƒë·ªÉ ƒë·∫£m b·∫£o r·∫±ng d·ªØ li·ªáu m·ªõi ho·∫∑c d·ªØ li·ªáu ƒë√£ s·ª≠a ƒë·ªïi v·∫´n tu√¢n th·ªß c√°c quy t·∫Øc ƒë√£ ƒë·ªãnh.

N·∫øu c√≥ vi ph·∫°m, giao d·ªãch s·∫Ω b·ªã t·ª´ ch·ªëi v√† kh√¥ng c√≥ thay ƒë·ªïi n√†o ƒë∆∞·ª£c th·ª±c hi·ªán.

**C∆° ch·∫ø ho·∫°t ƒë·ªông c·ªßa c√°c r√†ng bu·ªôc ph·ªï bi·∫øn:**
- **Primary Key**: ƒê·∫£m b·∫£o r·∫±ng m·ªói b·∫£n ghi trong b·∫£ng l√† duy nh·∫•t v√† kh√¥ng c√≥ gi√° tr·ªã NULL. Tr∆∞·ªõc khi th√™m m·ªôt d·ªØ li·ªáu m·ªõi, DBMS s·∫Ω ki·ªÉm tra xem gi√° tr·ªã kh√≥a ch√≠nh ƒë√£ t·ªìn t·∫°i hay ch∆∞a. N·∫øu ƒë√£ c√≥, thao t√°c s·∫Ω b·ªã t·ª´ ch·ªëi.
- **R√†ng bu·ªôc kh√≥a ngo·∫°i (Foreign Key)**: ƒê·∫£m b·∫£o r·∫±ng gi√° tr·ªã trong m·ªôt c·ªôt ph·∫£i t·ªìn t·∫°i trong m·ªôt b·∫£ng kh√°c. Khi th√™m ho·∫∑c s·ª≠a ƒë·ªïi d·ªØ li·ªáu, DBMS s·∫Ω ki·ªÉm tra xem gi√° tr·ªã c√≥ h·ª£p l·ªá hay kh√¥ng.
  - M·ªôt v√≠ d·ª• ƒë∆°n gi·∫£n
    - Gi·∫£ s·ª≠ b·∫°n c√≥ hai b·∫£ng: `Customers` v√† `Orders`. B·∫£ng `Orders` c√≥ m·ªôt c·ªôt `CustomerID` l√† kh√≥a ngo·∫°i tham chi·∫øu ƒë·∫øn c·ªôt `CustomerID` trong b·∫£ng `Customers`.
    - Khi b·∫°n th√™m m·ªôt ƒë∆°n h√†ng m·ªõi, h·ªá th·ªëng s·∫Ω ki·ªÉm tra xem `CustomerID` c·ªßa ƒë∆°n h√†ng ƒë√≥ c√≥ t·ªìn t·∫°i trong b·∫£ng `Customers` hay kh√¥ng. N·∫øu kh√¥ng, giao d·ªãch s·∫Ω b·ªã t·ª´ ch·ªëi.
- **R√†ng bu·ªôc Duy Nh·∫•t (UNIQUE)**: ƒê·∫£m b·∫£o c√°c d·ªØ li·ªáu trong c√πng m·ªôt c·ªôt l√† duy nh·∫•t. Khi th√™m ho·∫∑c s·ª≠a ƒë·ªïi d·ªØ li·ªáu, DBMS s·∫Ω ki·ªÉm tra xem gi√° tr·ªã m·ªõi c√≥ tr√πng l·∫∑p v·ªõi c√°c gi√° tr·ªã hi·ªán c√≥ hay kh√¥ng.
  -  C∆° ch·∫ø n√†y t∆∞∆°ng t·ª± kh√≥a ch√≠nh nh∆∞ng cho ph√©p m·ªôt gi√° tr·ªã NULL.
- **R√†ng bu·ªôc Ki·ªÉu D·ªØ Li·ªáu (Data Type Constraints)**: ƒê·∫£m b·∫£o r·∫±ng d·ªØ li·ªáu ƒë∆∞·ª£c nh·∫≠p v√†o c·ªôt ph·∫£i ph√π h·ª£p v·ªõi ki·ªÉu d·ªØ li·ªáu ƒë√£ ƒë·ªãnh nghƒ©a. V√≠ d·ª•, n·∫øu c·ªôt ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a l√† ki·ªÉu s·ªë nguy√™n, h·ªá th·ªëng s·∫Ω t·ª´ ch·ªëi b·∫•t k·ª≥ gi√° tr·ªã n√†o kh√¥ng ph·∫£i l√† s·ªë nguy√™n.
- **R√†ng bu·ªôc NOT NULL**: ƒê∆°n gi·∫£n l√† kh√¥ng cho ph√©p m·ªôt c·ªôt c√≥ gi√° tr·ªã NULL.
- **R√†ng bu·ªôc Ki·ªÉm Tra (CHECK Constraints)**: ƒê√¢y l√† c√°c quy t·∫Øc t√πy ch·ªânh m√† ng∆∞·ªùi d√πng c√≥ th·ªÉ ƒë·ªãnh nghƒ©a ƒë·ªÉ ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa d·ªØ li·ªáu. V√≠ d·ª•, b·∫°n c√≥ th·ªÉ ƒë·ªãnh nghƒ©a m·ªôt r√†ng bu·ªôc r·∫±ng gi√° tr·ªã trong c·ªôt `Age` ph·∫£i l·ªõn h∆°n 0.
- **R√†ng bu·ªôc Tr√¨nh T·ª± (Sequence Constraints)**: ƒê·∫£m b·∫£o r·∫±ng c√°c gi√° tr·ªã trong m·ªôt c·ªôt tu√¢n theo m·ªôt tr√¨nh t·ª± nh·∫•t ƒë·ªãnh, ch·∫≥ng h·∫°n nh∆∞ ng√†y th√°ng ph·∫£i tƒÉng d·∫ßn.
- ....

###### 1.1.5.3.2 Triggers

C√°c r√†ng bu·ªôc d·ªØ li·ªáu l√† m·ªôt ph·∫ßn quan tr·ªçng trong vi·ªác ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n, nh∆∞ng ƒë√¥i khi ch√∫ng kh√¥ng ƒë·ªß ƒë·ªÉ x·ª≠ l√Ω c√°c t√¨nh hu·ªëng ph·ª©c t·∫°p. ƒê√¢y l√† l√∫c triggers tr·ªü n√™n h·ªØu √≠ch.

Triggers l√† c√°c ƒëo·∫°n m√£ ƒë∆∞·ª£c k√≠ch ho·∫°t t·ª± ƒë·ªông khi c√≥ m·ªôt s·ª± ki·ªán x·∫£y ra trong c∆° s·ªü d·ªØ li·ªáu, ch·∫≥ng h·∫°n nh∆∞ khi m·ªôt b·∫£n ghi ƒë∆∞·ª£c ch√®n, c·∫≠p nh·∫≠t ho·∫∑c x√≥a.

**C∆° ch·∫ø ho·∫°t ƒë·ªông:**
- 1. **S·ª± ki·ªán k√≠ch ho·∫°t:** M·ªôt ng∆∞·ªùi d√πng ho·∫∑c ·ª©ng d·ª•ng th·ª±c hi·ªán m·ªôt c√¢u l·ªánh DML (v√≠ d·ª•: `UPDATE SanPham SET SoLuongTon = SoLuongTon - 5 WHERE ID = 101`).
- 2. K√≠ch ho·∫°t Trigger: N·∫øu c√≥ m·ªôt trigger ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a cho s·ª± ki·ªán UPDATE tr√™n b·∫£ng `SanPham`, DBMS s·∫Ω t·∫°m d·ª´ng v√† th·ª±c thi ƒëo·∫°n m√£ trong trigger.
- 3. **Th·ª±c thi logic nghi·ªáp v·ª•**: ƒêo·∫°n m√£ trong trigger c√≥ th·ªÉ th·ª±c hi·ªán c√°c ki·ªÉm tra ph·ª©c t·∫°p m√† r√†ng bu·ªôc kh√¥ng l√†m ƒë∆∞·ª£c. 
  - V√≠ d·ª•, trigger c√≥ th·ªÉ ki·ªÉm tra xem `SoLuongTon` sau khi c·∫≠p nh·∫≠t c√≥ nh·ªè h∆°n 0 kh√¥ng. Ho·∫∑c n√≥ c√≥ th·ªÉ t·ª± ƒë·ªông t·∫°o m·ªôt b·∫£n ghi trong b·∫£ng `LichSuGiaoDich`.
- 4. **Quy·∫øt ƒë·ªãnh:** D·ª±a tr√™n k·∫øt qu·∫£ logic, trigger c√≥ th·ªÉ cho ph√©p giao d·ªãch ti·∫øp t·ª•c ho·∫∑c ch·ªß ƒë·ªông t·∫°o ra m·ªôt l·ªói ƒë·ªÉ h·ªßy b·ªè to√†n b·ªô giao d·ªãch.

V√≠ d·ª•, m·ªôt `trigger BEFORE UPDATE` tr√™n b·∫£ng `KhoHang` c√≥ th·ªÉ ki·ªÉm tra xem s·ªë l∆∞·ª£ng s·∫£n ph·∫©m ƒë∆∞·ª£c y√™u c·∫ßu xu·∫•t kho c√≥ v∆∞·ª£t qu√° s·ªë l∆∞·ª£ng t·ªìn kho hi·ªán t·∫°i hay kh√¥ng. N·∫øu v∆∞·ª£t qu√°, trigger s·∫Ω b√°o l·ªói v√† ngƒÉn ch·∫∑n h√†nh ƒë·ªông c·∫≠p nh·∫≠t, qua ƒë√≥ duy tr√¨ t√≠nh nh·∫•t qu√°n c·ªßa d·ªØ li·ªáu t·ªìn kho.

###### 1.1.5.3.3 Qu·∫£n L√Ω Giao D·ªãch (Transaction Management)

B·∫£n th√¢n kh√°i ni·ªám giao d·ªãch ƒë√£ l√† m·ªôt c∆° ch·∫ø quan tr·ªçng ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n.

M·ªói m·ªôt giao d·ªãch l√† m·ªôt chu·ªói c√°c thao t√°c ƒë∆∞·ª£c coi l√† m·ªôt ƒë∆°n v·ªã duy nh·∫•t. T√≠nh nh·∫•t qu√°n ƒë·∫£m b·∫£o r·∫±ng n·∫øu m·ªôt giao d·ªãch b·∫Øt ƒë·∫ßu t·ª´ m·ªôt tr·∫°ng th√°i nh·∫•t qu√°n th√¨ khi k·∫øt th√∫c n√≥ ph·∫£i l√† m·ªôt tr·∫°ng th√°i nh·∫•t qu√°n kh√°c.

**C∆° ch·∫ø ho·∫°t ƒë·ªông:**
- **B·∫Øt ƒë·∫ßu giao d·ªãch (Begin Transaction)**: Khi m·ªôt giao d·ªãch b·∫Øt ƒë·∫ßu v√≠ d·ª•: `BEGIN TRANSACTION` DBMS t·∫°o ra m·ªôt kh√¥ng gian l√†m vi·ªác t·∫°m th·ªùi cho giao d·ªãch ƒë√≥.
- **Th·ª±c hi·ªán c√°c thao t√°c**: C√°c c√¢u l·ªánh DML(Data Manipulation Language ) (`INSERT, UPDATE, DELETE`) ƒë∆∞·ª£c th·ª±c hi·ªán trong kh√¥ng gian l√†m vi·ªác n√†y.
    - C√°c thay ƒë·ªïi trong kh√¥ng gian l√†m vi·ªác n√†y kh√¥ng ƒë∆∞·ª£c ghi v√†o c∆° s·ªü d·ªØ li·ªáu ch√≠nh(`ƒêƒ©a`) cho ƒë·∫øn khi giao d·ªãch ƒë∆∞·ª£c cam k·∫øt.
- **Ki·ªÉm tra v√† Cam k·∫øt giao d·ªãch (Commit Transaction)**: Khi c√≥ l·ªánh `COMMIT`, DBMS s·∫Ω th·ª±c hi·ªán m·ªôt lo·∫°t c√°c ki·ªÉm tra bao g·ªìm c√°c r√†ng bu·ªôc v√† quy t·∫Øc li√™n quan.
  - N·∫øu m·ªçi th·ª© ƒë·ªÅu h·ª£p l·ªá, t·∫•t c·∫£ c√°c thay ƒë·ªïi trong giao d·ªãch s·∫Ω ƒë∆∞·ª£c l∆∞u vƒ©nh vi·ªÖn. C∆° s·ªü d·ªØ li·ªáu s·∫Ω chuy·ªÉn sang m·ªôt tr·∫°ng th√°i nh·∫•t qu√°n m·ªõi.
- **Rollback giao d·ªãch**: N·∫øu c√≥ b·∫•t k·ª≥ l·ªói n√†o x·∫£y ra trong qu√° tr√¨nh th·ª±c hi·ªán giao d·ªãch, v√≠ d·ª•, vi ph·∫°m r√†ng bu·ªôc, l·ªói logic trong trigger, ho·∫∑c l·ªánh ROLLBACK ƒë∆∞·ª£c g·ªçi t∆∞·ªùng minh)
  - DBMS s·∫Ω h·ªßy b·ªè t·∫•t c·∫£ c√°c thay ƒë·ªïi ƒë√£ ƒë∆∞·ª£c th·ª±c hi·ªán trong giao d·ªãch ƒë√≥. C∆° s·ªü d·ªØ li·ªáu ƒë∆∞·ª£c tr·∫£ v·ªÅ tr·∫°ng th√°i h·ª£p l·ªá ngay tr∆∞·ªõc khi giao d·ªãch b·∫Øt ƒë·∫ßu, nh∆∞ th·ªÉ giao d·ªãch ch∆∞a bao gi·ªù x·∫£y ra.
